// Generated by CoffeeScript 1.6.3
(function() {
  var GOOGLE_API_KEY;

  GOOGLE_API_KEY = 'AIzaSyDoehw7uaZLP99B6zr8zaAxYplx-8vA-6g';

  $(function() {
    $('button[name="google-translate"]').on('click', function(_arg) {
      var currentTarget, target, translateRequest, translateUri;
      currentTarget = _arg.currentTarget;
      target = $(currentTarget);
      translateUri = "https://www.googleapis.com/language/translate/v2?key=" + GOOGLE_API_KEY + "&source=en&target=" + (target.data('language-code')) + "&q=" + (target.data('translate-string'));
      translateRequest = $.get(encodeURI(translateUri));
      return translateRequest.done(function(result) {
        var associatedTextArea, translatedString;
        if ('data' in result) {
          translatedString = result.data.translations[0].translatedText;
          associatedTextArea = target.parent().children('label').children('textarea');
          return associatedTextArea.val(translatedString);
        }
      });
    });
    return $("form").on("submit", function(e) {
      var formDataArray, request;
      e.preventDefault();
      formDataArray = $(this).serializeArray();
      formDataArray[0].action = $(e.currentTarget).find('#action').data('action');
      request = $.ajax({
        type: "POST",
        url: "" + window.location.pathname,
        data: formDataArray[0]
      });
      request.done(function() {
        console.log("success");
        $(e.currentTarget).html('Thank you!');
        return setTimeout(function() {
          return $(e.currentTarget).animate({
            height: 0,
            opacity: 0
          });
        }, 2000);
      });
      request.fail(function() {
        return console.log("fail");
      });
      return request.always(function() {
        return console.log("always");
      });
    });
  });

}).call(this);
